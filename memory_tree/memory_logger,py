import os
import json
from datetime import datetime

class MemoryLogger:
    def __init__(self, memory_dir="memory_tree/logs"):
        os.makedirs(memory_dir, exist_ok=True)
        self.memory_dir = memory_dir

    def log_memory(self, context, tags=None):
        entry = {
            "timestamp": datetime.now().isoformat(),
            "context": context,
            "tags": tags or []
        }
        filename = f"{datetime.now().strftime('%Y%m%d_%H%M%S')}_memory.json"
        path = os.path.join(self.memory_dir, filename)
        with open(path, "w") as f:
            json.dump(entry, f, indent=2)

    def list_logs(self):
        return os.listdir(self.memory_dir)

    def read_log(self, filename):
        with open(os.path.join(self.memory_dir, filename), "r") as f:
            return json.load(f)
